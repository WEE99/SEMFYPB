{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\project\\\\ReactJSWEB\\\\pages\\\\staff.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport AdminLayout from \"../components/AdminLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { MyModal, MySnackBar, MyTable, pinkM } from \"../helpers/mainHelpers\";\nimport Edit from \"@material-ui/icons/Edit\"; //import {auth, db,secondFirebase} from \"../helpers/firebase\";\n\nimport { auth, db } from \"../helpers/firebase\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { Paper, TextField } from \"@material-ui/core\";\nimport AcUnitIcon from \"@material-ui/icons/AcUnit\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nexport default function Staff() {\n  _s();\n\n  var _this = this;\n\n  var router = useRouter();\n\n  var _useState = useState([]),\n      columns = _useState[0],\n      setColumns = _useState[1];\n\n  var _useState2 = useState([]),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  var _useState3 = useState(false),\n      modal = _useState3[0],\n      setModal = _useState3[1];\n\n  var _useState4 = useState({}),\n      current = _useState4[0],\n      setCurrent = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      dropDown = _useState5[0],\n      setDropDown = _useState5[1];\n\n  var _useState6 = useState(false),\n      edit = _useState6[0],\n      setEdit = _useState6[1];\n\n  var _useState7 = useState(false),\n      snackBar = _useState7[0],\n      setSnackbar = _useState7[1];\n\n  var _useState8 = useState(\"info\"),\n      severity = _useState8[0],\n      setSeverity = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      message = _useState9[0],\n      setMessage = _useState9[1];\n\n  var _useState10 = useState(true),\n      nMode = _useState10[0],\n      setNMode = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      userId = _useState11[0],\n      setUserId = _useState11[1];\n\n  var _useState12 = useState(\"\"),\n      photo = _useState12[0],\n      setPhoto = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      name = _useState13[0],\n      setName = _useState13[1];\n\n  var _useState14 = useState(\"\"),\n      password = _useState14[0],\n      setPassword = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      email = _useState15[0],\n      setEmail = _useState15[1];\n\n  var _useState16 = useState(\"\"),\n      company = _useState16[0],\n      setCompany = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      address = _useState17[0],\n      setAddress = _useState17[1];\n\n  var _useState18 = useState(\"\"),\n      phoneNum = _useState18[0],\n      setPhoneNum = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      role = _useState19[0],\n      setRole = _useState19[1];\n\n  var useStyles = makeStyles(function (theme) {\n    return {\n      formControl: {\n        //   margin: theme.spacing(1),\n        minWidth: 120,\n        marginBottom: 10\n      } // selectEmpty: {\n      //   marginTop: theme.spacing(2),\n      // },\n\n    };\n  });\n  var classes = useStyles();\n\n  var handleChange = function handleChange(event) {\n    setRole(event.target.value);\n  };\n\n  useEffect(function () {\n    console.log(router);\n    setColumns([{\n      title: 'Avatar',\n      // field: 'avatar',\n      field: 'photoURL',\n      render: function render(rowData) {\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            height: 36,\n            borderRadius: '50%',\n            width: 36\n          },\n          src: rowData.photoURL // src={rowData.photoURL}\n\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, _this);\n      }\n    }, {\n      title: 'Name',\n      field: 'name'\n    }, {\n      title: 'Role',\n      field: 'role'\n    }, {\n      title: 'Company',\n      field: 'companyName'\n    }, {\n      title: 'Email',\n      field: 'email'\n    }, {\n      title: 'Phone Number',\n      field: 'phoneNumber'\n    }]);\n    db.collection(\"users\").where(\"role\", \"!=\", \"Super Admin\") // db.collection(\"users\").where(\"role\", \"==\", \"Salesperson\")\n    //.where(\"role\", \"==\", \"Company Admin\")\n    .onSnapshot(function (querySnapshot) {\n      var usersArr = [];\n      querySnapshot.forEach(function (doc) {\n        var r = doc.data();\n        r.id = doc.id;\n        usersArr.push(r);\n      });\n      setUsers(usersArr);\n    });\n  }, []);\n\n  var openEditor = function openEditor() {\n    setName(\"\");\n    setPhoto(\"\");\n    setEmail(\"\");\n    setCompany(\"\");\n    setPhoneNum(\"\");\n    setRole(\"\");\n    setAddress(\"\");\n    setEdit(false);\n    setModal(true);\n    setCurrent({});\n  };\n\n  var handleEdit = function handleEdit(rowData) {\n    setCurrent(rowData);\n    setName(rowData.name);\n    setEmail(rowData.email);\n    setPhoneNum(rowData.phoneNumber);\n    setAddress(rowData.address);\n    setPhoto(rowData.photoURL);\n    setRole(rowData.role);\n    setCompany(rowData.companyName);\n    setDropDown(rowData.status);\n    setEdit(true);\n    setModal(true);\n  };\n\n  var handleUpdate = function handleUpdate() {\n    if (name === \"\" || email === \"\" || address === \"\" || phoneNum === \"\") {\n      alert(\"Please complete all fields\");\n    } else {\n      db.collection(\"users\").doc(current.id).update({\n        name: name,\n        username: name,\n        address: address,\n        phoneNumber: phoneNum,\n        email: email,\n        companyName: company,\n        role: role\n      }).then(function () {\n        setSeverity(\"success\");\n        setMessage(\"User successfully updated\");\n        setSnackbar(true);\n        setModal(false);\n      })[\"catch\"](function (error) {\n        setSeverity(\"error\");\n        setMessage(\"An Error Occurred. Please try again later\");\n        setSnackbar(true);\n        setModal(false);\n      });\n    }\n  };\n\n  var handleCreate = function handleCreate() {\n    if (name === \"\" || email === \"\" || address === \"\" || phoneNum === \"\") {\n      alert(\"Please complete all fields\");\n    } else {\n      //secondFirebase.auth().createUserWithEmailAndPassword(email, \"1234567890\").then(result => {\n      auth.createUserWithEmailAndPassword(email, \"1234567890\").then(function (result) {\n        db.collection('users').doc(result.user.uid).set({\n          UID: result.user.uid,\n          name: name,\n          nickname: \"\",\n          username: name,\n          address: address,\n          email: email,\n          companyName: company,\n          phoneNumber: phoneNum,\n          admin: false,\n          notification: false,\n          photoURL: \"https://firebasestorage.googleapis.com/v0/b/salesmanagement-karuna.appspot.com/o/blankProfilePic.jpg?alt=media&token=540c87af-8cfb-49d7-b8ef-f921a3e60634\",\n          role: role,\n          //salesperson:true,\n          theme: \"#60cef4\"\n        }).then(function (docRef) {\n          setSeverity(\"success\");\n          setMessage(\"User successfully created\");\n          setSnackbar(true);\n          setModal(false); //secondFirebase.auth().signOut();\n\n          auth.signOut();\n        });\n      }); //     db.collection(\"users\").add({\n      //         UID:\"\",\n      //         name: name,\n      //         username: name,\n      //         address: address,\n      //         email:email,\n      //         companyName:company,\n      //         phoneNumber: phoneNum,\n      //         notification: false,\n      //         photoUrl:\"https://firebasestorage.googleapis.com/v0/b/salesmanagement-karuna.appspot.com/o/blankProfilePic.jpg?alt=media&token=540c87af-8cfb-49d7-b8ef-f921a3e60634\",\n      //         role:role,\n      //         salesperson:true,\n      //         theme:\"#60cef4\"\n      //     })\n      //     .then(function(docRef) {\n      //         setSeverity(\"success\");\n      //         setMessage(\"User successfully created\");\n      //         setSnackbar(true);\n      //         setModal(false)\n      //     });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AdminLayout, {\n    setNMode: setNMode,\n    setUserId: setUserId,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"space-between\",\n      style: {\n        marginTop: 10,\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 10,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          style: {\n            color: \"grey\",\n            marginTop: 15\n          },\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 2,\n        style: {\n          justifyItems: \"flex-end\",\n          justifyContent: \"flex-end\"\n        },\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: openEditor,\n          style: {\n            marginTop: 8,\n            backgroundColor: \"#f50057\",\n            color: \"#fff\",\n            borderRadius: 5,\n            marginLeft: 40\n          },\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 11,\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          style: {\n            backgroundColor: \"rgba(255, 255, 255, 0)\",\n            marginBottom: 20\n          },\n          variant: \"outlined\",\n          children: users.length !== 0 && /*#__PURE__*/_jsxDEV(MyTable, {\n            title: \"\",\n            columns: columns,\n            data: users,\n            SColor: nMode ? \"#fff\" : \"grey\",\n            actions: [{\n              icon: function icon() {\n                return /*#__PURE__*/_jsxDEV(Edit, {\n                  style: {\n                    color: nMode ? \"#fff\" : \"grey\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 45\n                }, _this);\n              },\n              tooltip: 'Edit/View User',\n              onClick: function onClick(event, rowData) {\n                handleEdit(rowData);\n              }\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n      handleClose: function handleClose() {\n        setModal(false);\n      },\n      open: modal,\n      title: edit ? \"Edit User\" : \"Add New User\",\n      clr: nMode ? \"#1b1c21\" : \"#fff\",\n      clrB: nMode ? \"#fff\" : \"darkgrey\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        outline: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        style: {\n          maxWidth: 400,\n          margin: \"auto\",\n          borderWidth: 0,\n          backgroundColor: \"rgba(255, 255, 255, 0)\"\n        },\n        variant: \"outlined\",\n        children: [photo !== \"\" && /*#__PURE__*/_jsxDEV(Avatar, {\n          alt: \"Profile Pic\",\n          src: photo,\n          style: {\n            alignSelf: \"center\",\n            marginBottom: 20,\n            marginTop: 10,\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            width: 45,\n            height: 45\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Name\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: name,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setName(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this), edit && /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Email\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: email,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setEmail(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 24\n        }, this), !edit && /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Email\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: email,\n          style: {\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setEmail(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }, this), !edit && /*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          variant: \"subtitle2\",\n          style: {\n            color: \"red\"\n          },\n          children: \"*A Confirmation Email Will be Sent to this Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Phone Number\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: phoneNum,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setPhoneNum(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            variant: \"filled\",\n            className: classes.formControl,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"demo-simple-select-filled-label\",\n              children: \"Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-simple-select-filled-label\",\n              id: \"demo-simple-select-filled\",\n              value: role,\n              onChange: handleChange,\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"Salesperson\",\n                children: \"Salesperson\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"Company Admin\",\n                children: \"Company Admin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Company\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: company,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setCompany(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Address\",\n          variant: \"filled\",\n          fullWidth: true,\n          multiline: true,\n          rows: 4,\n          value: address,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setAddress(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justify: \"space-between\",\n          style: {\n            marginTop: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: function onClick() {\n                return setModal(false);\n              },\n              variant: \"contained\",\n              color: \"secondary\",\n              fullWidth: true,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 5,\n            style: {\n              marginBottom: 20\n            },\n            children: edit ? /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              fullWidth: true,\n              onClick: handleUpdate,\n              children: \"Save Changes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              fullWidth: true,\n              onClick: handleCreate,\n              children: \"Create User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          style: {\n            color: \"grey\"\n          },\n          children: [\"UID : \", current.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MySnackBar, {\n      open: snackBar,\n      handleClose: function handleClose() {\n        return setSnackbar(false);\n      },\n      severity: severity,\n      msg: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Staff, \"b1f78WKJL208IWlXbsxgjPJgqFQ=\", true, function () {\n  return [useRouter];\n});\n\n_c = Staff;\n\nvar _c;\n\n$RefreshReg$(_c, \"Staff\");","map":{"version":3,"sources":["D:/project/ReactJSWEB/pages/staff.js"],"names":["React","useEffect","useState","useRouter","AdminLayout","Typography","MyModal","MySnackBar","MyTable","pinkM","Edit","auth","db","Grid","Paper","TextField","AcUnitIcon","IconButton","AddIcon","Button","Avatar","makeStyles","InputLabel","MenuItem","FormHelperText","FormControl","Select","Staff","router","columns","setColumns","users","setUsers","modal","setModal","current","setCurrent","dropDown","setDropDown","edit","setEdit","snackBar","setSnackbar","severity","setSeverity","message","setMessage","nMode","setNMode","userId","setUserId","photo","setPhoto","name","setName","password","setPassword","email","setEmail","company","setCompany","address","setAddress","phoneNum","setPhoneNum","role","setRole","useStyles","theme","formControl","minWidth","marginBottom","classes","handleChange","event","target","value","console","log","title","field","render","rowData","height","borderRadius","width","photoURL","collection","where","onSnapshot","querySnapshot","usersArr","forEach","doc","r","data","id","push","openEditor","handleEdit","phoneNumber","companyName","status","handleUpdate","alert","update","username","then","error","handleCreate","createUserWithEmailAndPassword","result","user","uid","set","UID","nickname","admin","notification","docRef","signOut","marginTop","color","justifyItems","justifyContent","backgroundColor","marginLeft","length","icon","tooltip","onClick","display","alignItems","outline","maxWidth","margin","borderWidth","alignSelf","marginRight","e"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { useRouter } from 'next/router'\r\nimport AdminLayout from \"../components/AdminLayout\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {MyModal, MySnackBar, MyTable, pinkM} from \"../helpers/mainHelpers\";\r\nimport Edit from \"@material-ui/icons/Edit\";\r\n//import {auth, db,secondFirebase} from \"../helpers/firebase\";\r\nimport {auth, db} from \"../helpers/firebase\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {Paper, TextField} from \"@material-ui/core\";\r\nimport AcUnitIcon from \"@material-ui/icons/AcUnit\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\n\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\n\r\n\r\n\r\n\r\n \r\nexport default function Staff() {\r\n    const router = useRouter();\r\n    const [columns, setColumns] = useState([]);\r\n    const [users, setUsers] = useState([]);\r\n    const [modal, setModal] = useState(false);\r\n    const [current, setCurrent] = useState({});\r\n    const [dropDown, setDropDown] = useState(\"\");\r\n    const [edit, setEdit] = useState(false);\r\n    const [snackBar, setSnackbar] = useState(false);\r\n    const [severity, setSeverity] = useState(\"info\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [nMode, setNMode] = useState(true);\r\n    const [userId, setUserId] = useState(\"\");\r\n\r\n    const [photo, setPhoto] = useState(\"\");\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [company, setCompany] = useState(\"\");\r\n    const [address, setAddress] = useState(\"\");\r\n    const [phoneNum, setPhoneNum] = useState(\"\");\r\n    const [role, setRole] = useState(\"\");\r\n\r\n\r\n    const useStyles = makeStyles((theme) => ({\r\n        formControl: {\r\n        //   margin: theme.spacing(1),\r\n          minWidth: 120,\r\n          marginBottom:10\r\n        },\r\n        // selectEmpty: {\r\n        //   marginTop: theme.spacing(2),\r\n        // },\r\n      }));\r\n    const classes = useStyles();\r\n    const handleChange = (event) => {\r\n        setRole(event.target.value);}\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(router);\r\n        setColumns([\r\n            {\r\n                title: 'Avatar',\r\n                // field: 'avatar',\r\n                field: 'photoURL',\r\n                render: rowData => (\r\n                    <img\r\n                        style={{ height: 36, borderRadius: '50%', width:36 }}\r\n                        src={rowData.photoURL}\r\n                        // src={rowData.photoURL}\r\n                    />\r\n                ),\r\n            },\r\n            { title: 'Name', field: 'name' },\r\n            { title: 'Role', field: 'role'},\r\n            { title: 'Company', field: 'companyName' },\r\n            { title: 'Email', field: 'email' },\r\n            { title: 'Phone Number', field: 'phoneNumber' }\r\n        ])\r\n\r\n        db.collection(\"users\").where(\"role\", \"!=\", \"Super Admin\")\r\n        // db.collection(\"users\").where(\"role\", \"==\", \"Salesperson\")\r\n        //.where(\"role\", \"==\", \"Company Admin\")\r\n        .onSnapshot(function(querySnapshot) {\r\n            let usersArr = [];\r\n            querySnapshot.forEach(function(doc) {\r\n                let r = doc.data();\r\n                r.id = doc.id;\r\n                usersArr.push(r);\r\n            });\r\n            setUsers(usersArr);\r\n        });\r\n\r\n    },[])\r\n\r\n    const openEditor = () => {\r\n        setName(\"\");\r\n        setPhoto(\"\");\r\n        setEmail(\"\");\r\n        setCompany(\"\");\r\n        setPhoneNum(\"\");\r\n        setRole(\"\");\r\n        setAddress(\"\");\r\n        setEdit(false);\r\n        setModal(true);\r\n        setCurrent({});\r\n    }\r\n\r\n    const handleEdit = (rowData) => {\r\n        setCurrent(rowData);\r\n\r\n        setName(rowData.name);\r\n        setEmail(rowData.email);\r\n        setPhoneNum(rowData.phoneNumber);\r\n        setAddress(rowData.address);\r\n        setPhoto(rowData.photoURL);\r\n        setRole(rowData.role);\r\n        setCompany(rowData.companyName);\r\n\r\n        setDropDown(rowData.status);\r\n        setEdit(true);\r\n        setModal(true);\r\n    }\r\n\r\n    const handleUpdate = ()=> {\r\n        if(name===\"\"||email===\"\"||address===\"\"||phoneNum===\"\"){\r\n            alert(\"Please complete all fields\");\r\n        }else {\r\n            db.collection(\"users\").doc(current.id).update({\r\n                name: name,\r\n                username: name,\r\n                address: address,\r\n                phoneNumber: phoneNum,\r\n                email:email,\r\n                companyName:company,\r\n                role:role,\r\n            })\r\n            .then(function() {\r\n                setSeverity(\"success\");\r\n                setMessage(\"User successfully updated\");\r\n                setSnackbar(true);\r\n                setModal(false)\r\n            })\r\n            .catch(function(error) {\r\n                setSeverity(\"error\");\r\n                setMessage(\"An Error Occurred. Please try again later\");\r\n                setSnackbar(true);\r\n                setModal(false)\r\n            });\r\n        }\r\n    }\r\n\r\n    const handleCreate = ()=>{\r\n        if(name===\"\"||email===\"\"||address===\"\"||phoneNum===\"\"){\r\n            alert(\"Please complete all fields\");\r\n            \r\n        }else{\r\n            //secondFirebase.auth().createUserWithEmailAndPassword(email, \"1234567890\").then(result => {\r\n             auth.createUserWithEmailAndPassword(email, \"1234567890\").then(result => {\r\n                db.collection('users').doc(result.user.uid).set({\r\n                    UID:result.user.uid,\r\n                    name: name,\r\n                    nickname:\"\",\r\n                    username: name,\r\n                    address: address,\r\n                    email:email,\r\n                    companyName:company,\r\n                    phoneNumber: phoneNum,\r\n                    admin:false,\r\n                    notification: false,\r\n                    photoURL:\"https://firebasestorage.googleapis.com/v0/b/salesmanagement-karuna.appspot.com/o/blankProfilePic.jpg?alt=media&token=540c87af-8cfb-49d7-b8ef-f921a3e60634\",\r\n                    role:role,\r\n                    //salesperson:true,\r\n                    theme:\"#60cef4\"\r\n                })\r\n                .then(function(docRef) {\r\n                    setSeverity(\"success\");\r\n                    setMessage(\"User successfully created\");\r\n                    setSnackbar(true);\r\n                    setModal(false);\r\n                    //secondFirebase.auth().signOut();\r\n                    auth.signOut();\r\n                });\r\n            });\r\n\r\n        //     db.collection(\"users\").add({\r\n        //         UID:\"\",\r\n        //         name: name,\r\n        //         username: name,\r\n        //         address: address,\r\n        //         email:email,\r\n        //         companyName:company,\r\n        //         phoneNumber: phoneNum,\r\n        //         notification: false,\r\n        //         photoUrl:\"https://firebasestorage.googleapis.com/v0/b/salesmanagement-karuna.appspot.com/o/blankProfilePic.jpg?alt=media&token=540c87af-8cfb-49d7-b8ef-f921a3e60634\",\r\n        //         role:role,\r\n        //         salesperson:true,\r\n        //         theme:\"#60cef4\"\r\n        //     })\r\n        //     .then(function(docRef) {\r\n        //         setSeverity(\"success\");\r\n        //         setMessage(\"User successfully created\");\r\n        //         setSnackbar(true);\r\n        //         setModal(false)\r\n        //     });\r\n         }\r\n    }\r\n\r\n    return (\r\n        <AdminLayout setNMode={setNMode} setUserId={setUserId}>\r\n            <Grid container justify={\"space-between\"} style={{marginTop:10, marginBottom:10}}>\r\n                <Grid item xs={10}>\r\n                    <Typography variant=\"h5\" gutterBottom style={{color: \"grey\", marginTop: 15}}>\r\n                        User\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={2} style={{justifyItems:\"flex-end\", justifyContent:\"flex-end\"}}>\r\n                    <IconButton onClick={openEditor} style={{marginTop: 8, backgroundColor:\"#f50057\", color:\"#fff\", borderRadius:5, marginLeft:40}}>\r\n                        <AddIcon />\r\n                    </IconButton>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n                <Grid item xs={11}>\r\n                    <Paper style={{backgroundColor:\"rgba(255, 255, 255, 0)\", marginBottom:20}} variant=\"outlined\" >\r\n                        {users.length !==0 && <MyTable title=\"\" columns={columns} data={users} SColor={nMode?\"#fff\":\"grey\"} actions={[\r\n                            {\r\n                                icon: () => <Edit style={{color:nMode?\"#fff\":\"grey\"}}/>,\r\n                                tooltip: 'Edit/View User',\r\n                                onClick: (event, rowData) => {\r\n                                    handleEdit(rowData)\r\n                                }\r\n                            }\r\n                        ]}/>}\r\n                    </Paper>\r\n                </Grid>\r\n            </Grid>\r\n            <MyModal handleClose={() => {setModal(false)}} open={modal} title={edit?\"Edit User\":\"Add New User\"} clr={nMode? \"#1b1c21\":\"#fff\"} clrB={nMode? \"#fff\":\"darkgrey\"} style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                outline: 'none'}}>\r\n                <Paper style={{maxWidth:400, margin:\"auto\", borderWidth:0, backgroundColor:\"rgba(255, 255, 255, 0)\"}} variant=\"outlined\">\r\n\r\n                    {photo!==\"\"&&<Avatar alt=\"Profile Pic\" src={photo} style={{alignSelf:\"center\", marginBottom:20, marginTop:10, marginLeft:\"auto\", marginRight:\"auto\", width:45, height:45}}/>}\r\n                    <TextField\r\n                    required\r\n                    label=\"Name\"\r\n                    variant=\"filled\"\r\n                    fullWidth\r\n                    value={name}\r\n                    style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                    onChange={(e) => {setName(e.target.value)}}\r\n                />\r\n\r\n                {edit&&<TextField\r\n                    required\r\n                    label=\"Email\"\r\n                    variant=\"filled\"\r\n                    fullWidth\r\n                    value={email}\r\n                    style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                    onChange={(e) => {setEmail(e.target.value)}}\r\n                />}\r\n\r\n                {!edit&&<TextField\r\n                    required\r\n                    label=\"Email\"\r\n                    variant=\"filled\"\r\n                    fullWidth\r\n                    value={email}\r\n                    style={{backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                    onChange={(e) => {setEmail(e.target.value)}}\r\n                />}\r\n                {!edit&&<Typography gutterBottom variant=\"subtitle2\" style={{color: \"red\"}}>\r\n                    *A Confirmation Email Will be Sent to this Email\r\n                </Typography>}\r\n\r\n                <TextField\r\n                    required\r\n                    label=\"Phone Number\"\r\n                    variant=\"filled\"\r\n                    fullWidth\r\n                    value={phoneNum}\r\n                    style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                    onChange={(e) => {setPhoneNum(e.target.value)}}\r\n                />\r\n\r\n              {/* <FormControl required className={classes.formControl}>\r\n                <InputLabel id=\"demo-simple-select-required-label\">Role</InputLabel>\r\n                <Select\r\n                labelId=\"demo-simple-select-required-label\"\r\n                id=\"demo-simple-select-required\"\r\n                value={role}\r\n                onChange={handleChange}\r\n                className={classes.selectEmpty}\r\n                >\r\n                <MenuItem value=\"\">\r\n                    <em>None</em>\r\n                </MenuItem>\r\n                <MenuItem value={\"Salesperson\"}>Salesperson</MenuItem>\r\n                <MenuItem value={\"Company Admin\"}>Company Admin</MenuItem>\r\n                \r\n                </Select>\r\n                <FormHelperText>Required</FormHelperText>\r\n            </FormControl> */}\r\n\r\n            {/* <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                <InputLabel id=\"demo-simple-select-outlined-label\">Role*</InputLabel>\r\n                <Select\r\n                \r\n                id=\"demo-simple-select-outlined\"\r\n                value={role}\r\n                onChange={handleChange}\r\n                label=\"Role\"\r\n                >\r\n                <MenuItem value=\"\">\r\n                    <em>None</em>\r\n                </MenuItem>\r\n                <MenuItem value={\"Salesperson\"}>Salesperson</MenuItem>\r\n                <MenuItem value={\"Company Admin\"}>Company Admin</MenuItem>\r\n                </Select>\r\n            </FormControl> */}\r\n\r\n                    <div>\r\n                    <FormControl variant=\"filled\" className={classes.formControl}>\r\n                    <InputLabel id=\"demo-simple-select-filled-label\">Role</InputLabel>\r\n                    <Select\r\n                    labelId=\"demo-simple-select-filled-label\"\r\n                    id=\"demo-simple-select-filled\"\r\n                    value={role}\r\n                    onChange={handleChange}\r\n                    >\r\n                    {/* <MenuItem value=\"\">\r\n                        <em>None</em>\r\n                    </MenuItem> */}\r\n                    <MenuItem value={\"Salesperson\"}>Salesperson</MenuItem>\r\n                    <MenuItem value={\"Company Admin\"}>Company Admin</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n                </div>\r\n\r\n                <TextField\r\n                    required\r\n                    label=\"Company\"\r\n                    variant=\"filled\"\r\n                    fullWidth\r\n                    value={company}\r\n                    style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                    onChange={(e) => {setCompany(e.target.value)}}\r\n                />\r\n                <TextField\r\n                    required\r\n                    label=\"Address\"\r\n                    variant=\"filled\"\r\n                    fullWidth\r\n                    multiline\r\n                    rows={4}\r\n                    value = {address}\r\n                    style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                    onChange={(e) => {setAddress(e.target.value)}}\r\n                />\r\n\r\n                <Grid container justify={\"space-between\"} style={{marginTop:10}}>\r\n                    <Grid item xs={3}>\r\n                        <Button onClick={()=> setModal(false)} variant=\"contained\" color=\"secondary\" fullWidth>\r\n                            Cancel\r\n                        </Button>\r\n                    </Grid>\r\n                    <Grid item xs={5} style={{marginBottom:20}}>\r\n                        {edit?\r\n                            <Button variant=\"contained\" color=\"primary\" fullWidth onClick={handleUpdate}>\r\n                                Save Changes\r\n                            </Button>:\r\n                            <Button variant=\"contained\" color=\"primary\" fullWidth onClick={handleCreate}>\r\n                                Create User\r\n                            </Button>}\r\n                    </Grid>\r\n                </Grid>\r\n                    <Typography  variant=\"subtitle2\" style={{color:\"grey\"}} >\r\n                        UID : {current.id}\r\n                    </Typography>\r\n                </Paper>\r\n            </MyModal>\r\n            <MySnackBar open={snackBar} handleClose={() => setSnackbar(false)} severity={severity} msg={message}/>\r\n\r\n        </AdminLayout>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}