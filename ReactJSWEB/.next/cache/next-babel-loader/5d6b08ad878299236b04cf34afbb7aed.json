{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\project\\\\ReactJSWEB\\\\pages\\\\index.js\";\nimport React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from \"@material-ui/core/TextField\";\nimport { Box } from \"@material-ui/core\";\nimport { useRouter } from 'next/router';\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport { auth } from \"../helpers/firebase\";\nimport AdminLayout from \"../components/AdminLayout\";\nexport default function Home() {\n  const router = useRouter();\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: loader,\n    1: setLoader\n  } = useState(false);\n  const {\n    0: nMode,\n    1: setNMode\n  } = useState(true);\n  const {\n    0: userId,\n    1: setUserId\n  } = useState(\"\");\n\n  const handleTextChange = e => {\n    if (e.target.name === \"email\") {\n      setEmail(e.target.value);\n    } else {\n      setPassword(e.target.value);\n    }\n  };\n\n  const wrongRole = () => {\n    auth.signOut().then(function () {\n      alert(\"Wrong role !\");\n    }).catch(function (error) {\n      alert(error.message); // alert(\"Wrong role !\")\n    });\n  };\n\n  const handleLogin = () => {\n    setLoader(true);\n    let r = email;\n\n    if (password !== '' && email !== '') {\n      let em = email.substr(email.length - 1);\n\n      if (em === ' ') {\n        r = r.slice(0, -1);\n      }\n\n      auth.signInWithEmailAndPassword(r, password).then(function (firebaseUser) {\n        db.collection(\"users\").where(\"UID\", \"==\", firebaseUser.user.uid).get().then(querySnapshot => {\n          querySnapshot.forEach(doc => {\n            console.log(doc.data());\n\n            if (_.get(doc.data(), 'admin')) {\n              console.log(\"Welcome Admin\");\n            } else {\n              wrongRole();\n            }\n          });\n        }).catch(error => {\n          console.log(\"Error getting documents: \", error);\n        });\n        setLoader(false);\n      }).catch(function (error) {\n        console.log(error);\n        window.alert(\"Incorrect email or password\");\n        setLoader(false);\n      });\n    } else {\n      window.alert(\"Please fill both fields\");\n      setLoader(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AdminLayout, {\n    setNMode: setNMode,\n    setUserId: setUserId,\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      alignItems: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 5,\n        style: {\n          borderRadius: 20,\n          border: '1px solid lightgrey',\n          marginTop: 200,\n          padding: 60\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          name: \"email\",\n          label: \"Email\",\n          variant: \"outlined\",\n          value: email,\n          onChange: handleTextChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          name: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          value: password,\n          variant: \"outlined\",\n          style: {\n            marginTop: 20\n          },\n          onChange: handleTextChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleLogin,\n          style: {\n            marginTop: 20\n          },\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(LinearProgress, {\n          style: {\n            display: loader ? \"block\" : \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 7\n  }, this);\n}","map":{"version":3,"sources":["D:/project/ReactJSWEB/pages/index.js"],"names":["React","useState","Button","Grid","TextField","Box","useRouter","LinearProgress","auth","AdminLayout","Home","router","email","setEmail","password","setPassword","loader","setLoader","nMode","setNMode","userId","setUserId","handleTextChange","e","target","name","value","wrongRole","signOut","then","alert","catch","error","message","handleLogin","r","em","substr","length","slice","signInWithEmailAndPassword","firebaseUser","db","collection","where","user","uid","get","querySnapshot","forEach","doc","console","log","data","_","window","borderRadius","border","marginTop","padding","display"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport { useRouter } from 'next/router'\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport {auth} from \"../helpers/firebase\";\r\nimport AdminLayout from \"../components/AdminLayout\";\r\n\r\n\r\nexport default function Home() {\r\n  const router = useRouter()\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loader, setLoader] = useState(false);\r\n  const [nMode, setNMode] = useState(true);\r\n  const [userId, setUserId] = useState(\"\");\r\n\r\n  const handleTextChange = (e) => {\r\n    if(e.target.name === \"email\"){\r\n      setEmail(e.target.value);\r\n    }else{\r\n      setPassword(e.target.value);\r\n    }\r\n  }\r\n\r\n  const wrongRole =() => {\r\n    auth.signOut().then(function() {\r\n        alert(\"Wrong role !\")\r\n    }).catch(function(error) {\r\n        alert(error.message);\r\n        // alert(\"Wrong role !\")\r\n    });\r\n    \r\n}\r\n\r\n  const handleLogin = () => {\r\n    setLoader(true);\r\n    let r = email;\r\n    if(password !== '' && email !== ''){\r\n      let em = email.substr(email.length - 1);\r\n      if (em === ' ') {\r\n        r= r.slice(0, -1);\r\n      }\r\n      auth.signInWithEmailAndPassword(r, password)\r\n          .then(function(firebaseUser) {\r\n            db.collection(\"users\").where(\"UID\", \"==\", firebaseUser.user.uid).get().then((querySnapshot) => {\r\n              querySnapshot.forEach((doc) => {\r\n                  console.log(doc.data());\r\n                          if(_.get(doc.data(), 'admin')) {\r\n                              console.log(\"Welcome Admin\")\r\n                          }else{\r\n                               wrongRole()\r\n                          }\r\n              });\r\n          })\r\n          .catch((error) => {\r\n              console.log(\"Error getting documents: \", error);\r\n          });\r\n            setLoader(false);\r\n          })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n            window.alert(\"Incorrect email or password\");\r\n            setLoader(false);\r\n          });\r\n\r\n    }else{\r\n      window.alert(\"Please fill both fields\");\r\n      setLoader(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n      <AdminLayout setNMode={setNMode}  setUserId={setUserId}>\r\n        <Grid container justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={5} style={{borderRadius: 20, border: '1px solid lightgrey', marginTop: 200, padding:60}}>\r\n\r\n            <h1>Login</h1>\r\n            <TextField fullWidth name=\"email\" label=\"Email\" variant=\"outlined\" value={email} onChange={handleTextChange}/>\r\n            <TextField fullWidth name=\"password\" label=\"Password\" type=\"password\" value={password} variant=\"outlined\" style={{marginTop: 20}} onChange={handleTextChange}/>\r\n            <Button fullWidth variant=\"contained\" color=\"primary\" onClick={handleLogin} style={{marginTop: 20}}>\r\n              Login\r\n            </Button>\r\n            <LinearProgress style={{display: loader? \"block\" : \"none\"}}/>\r\n          </Grid>\r\n\r\n        </Grid>\r\n\r\n      </AdminLayout>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}