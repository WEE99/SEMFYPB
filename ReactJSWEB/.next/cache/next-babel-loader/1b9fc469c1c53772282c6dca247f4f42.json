{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\project\\\\ReactJSWEB\\\\pages\\\\leads.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport AdminLayout from \"../components/AdminLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { MyModal, MySnackBar, MyTable, pinkM } from \"../helpers/mainHelpers\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport { auth, db, firebase } from \"../helpers/firebase\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { Paper, TextField } from \"@material-ui/core\";\nimport AcUnitIcon from \"@material-ui/icons/AcUnit\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nexport default function Leads() {\n  _s();\n\n  var _this = this;\n\n  var router = useRouter();\n\n  var _useState = useState([]),\n      columns = _useState[0],\n      setColumns = _useState[1];\n\n  var _useState2 = useState([]),\n      leads = _useState2[0],\n      setLeads = _useState2[1];\n\n  var _useState3 = useState(false),\n      modal = _useState3[0],\n      setModal = _useState3[1];\n\n  var _useState4 = useState({}),\n      current = _useState4[0],\n      setCurrent = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      dropDown = _useState5[0],\n      setDropDown = _useState5[1];\n\n  var _useState6 = useState(false),\n      edit = _useState6[0],\n      setEdit = _useState6[1];\n\n  var _useState7 = useState(false),\n      snackBar = _useState7[0],\n      setSnackbar = _useState7[1];\n\n  var _useState8 = useState(\"info\"),\n      severity = _useState8[0],\n      setSeverity = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      message = _useState9[0],\n      setMessage = _useState9[1];\n\n  var _useState10 = useState(true),\n      nMode = _useState10[0],\n      setNMode = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      photo = _useState11[0],\n      setPhoto = _useState11[1];\n\n  var _useState12 = useState(\"\"),\n      numLeads = _useState12[0],\n      setNumLeads = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      address = _useState13[0],\n      setAddress = _useState13[1];\n\n  var _useState14 = useState(\"\"),\n      phoneNum = _useState14[0],\n      setPhoneNum = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      userId = _useState15[0],\n      setUserId = _useState15[1];\n\n  var _useState16 = useState(\"\"),\n      company = _useState16[0],\n      setCompany = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      comment = _useState17[0],\n      setComment = _useState17[1];\n\n  var _useState18 = useState(\"\"),\n      contactNum = _useState18[0],\n      setContactNum = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      email = _useState19[0],\n      setEmail = _useState19[1];\n\n  var _useState20 = useState(\"\"),\n      interest = _useState20[0],\n      setInterest = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      name = _useState21[0],\n      setName = _useState21[1];\n\n  var _useState22 = useState(\"\"),\n      quote = _useState22[0],\n      setQuote = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      salespersonId = _useState23[0],\n      setSalespersonId = _useState23[1];\n\n  useEffect(function () {\n    setColumns([{\n      title: 'Name',\n      field: 'name'\n    }, {\n      title: 'Company',\n      field: 'company'\n    }, // { title: 'Handler', field: 'name'},\n    {\n      title: 'Quote',\n      field: 'quote',\n      render: function render(rowData) {\n        return /*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          variant: \"subtitle2\",\n          children: rowData.quote ? \"RM \" + quote : \" \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, _this);\n      }\n    }, {\n      title: \"\",\n      field: 'quote'\n    }, {\n      title: 'Interest',\n      field: 'interest'\n    }, {\n      title: 'Result',\n      field: 'result'\n    }, {\n      title: 'Status',\n      field: 'assigned',\n      render: function render(rowData) {\n        return /*#__PURE__*/_jsxDEV(Typography, {\n          gutterBottom: true,\n          variant: \"subtitle2\",\n          style: {\n            color: rowData.assigned ? \"green\" : \"red\"\n          },\n          children: rowData.assigned ? \"ASSIGNED\" : \"NOT ASSIGNED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, _this);\n      }\n    }]);\n    console.log(auth.currentUser);\n\n    if (userId !== \"\") {\n      // db.collection(\"leads\").where(\"adminID\", \"==\",userId)\n      db.collection(\"leads\").get().then(function (querySnapshot) {\n        var leadsArr = [];\n        querySnapshot.forEach(function (doc) {\n          var r = doc.data();\n          r.id = doc.id;\n          leadsArr.push(r);\n        });\n        setLeads(leadsArr);\n      });\n    }\n  }, [userId]);\n\n  var openEditor = function openEditor() {\n    setPhoto(\"\");\n    setEmail(\"\");\n    setPhoneNum(\"\");\n    setAddress(\"\");\n    setEdit(false);\n    setModal(true);\n  };\n\n  var handleEdit = function handleEdit(rowData) {\n    setCurrent(rowData);\n\n    if (rowData.userId !== undefined) {\n      setSalespersonId(rowData.userId);\n    } else {\n      setSalespersonId(\"\");\n    }\n\n    setEdit(true);\n    setModal(true);\n  };\n\n  var handleCreate = function handleCreate() {\n    if (name === \"\" || email === \"\" || contactNum === \"\" || company === \"\" || interest === \"\" || comment === \"\") {\n      alert(\"Please complete all fields\");\n    } else {\n      db.collection(\"leads\").add({\n        name: name,\n        company: company,\n        comment: comment,\n        email: email,\n        contactNumber: contactNum,\n        contacted: false,\n        assigned: false,\n        interest: interest,\n        quoteSent: false,\n        quote: \"\",\n        result: \"pending\"\n      }).then(function (docRef) {\n        setSeverity(\"success\");\n        setMessage(\"Lead successfully created\");\n        setSnackbar(true);\n        setModal(false);\n      });\n    }\n  };\n\n  var handleUpdate = function handleUpdate() {\n    db.collection(\"users\").doc(salespersonId).get().then(function (doc) {\n      if (doc.exists && doc.data().salesperson) {\n        db.collection(\"leads\").doc(current.id).update({\n          userId: salespersonId\n        }).then(function () {\n          setSeverity(\"success\");\n          setMessage(\"User successfully updated\");\n          setSnackbar(true);\n          setModal(false);\n        });\n      } else {\n        console.log(\"No such document!\");\n      }\n    })[\"catch\"](function (error) {\n      setSeverity(\"error\");\n      setMessage(\"An Error Occurred. Please ensure the id is correct\");\n      setSnackbar(true);\n      setModal(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(AdminLayout, {\n    setNMode: setNMode,\n    setUserId: setUserId,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"space-between\",\n      style: {\n        marginTop: 10,\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 10,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          style: {\n            color: \"grey\",\n            marginTop: 15\n          },\n          children: \"Leads\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 2,\n        style: {\n          justifyItems: \"flex-end\",\n          justifyContent: \"flex-end\"\n        },\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: openEditor,\n          style: {\n            marginTop: 8,\n            backgroundColor: \"#f50057\",\n            color: \"#fff\",\n            borderRadius: 5,\n            marginLeft: 40\n          },\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 11,\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          style: {\n            backgroundColor: \"rgba(255, 255, 255, 0)\",\n            marginBottom: 20\n          },\n          variant: \"outlined\",\n          children: leads.length !== 0 && /*#__PURE__*/_jsxDEV(MyTable, {\n            title: \"\",\n            columns: columns,\n            data: leads,\n            SColor: nMode ? \"#fff\" : \"grey\",\n            actions: [{\n              icon: function icon() {\n                return /*#__PURE__*/_jsxDEV(Edit, {\n                  style: {\n                    color: nMode ? \"#fff\" : \"grey\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 45\n                }, _this);\n              },\n              tooltip: 'Edit/View Lead',\n              onClick: function onClick(event, rowData) {\n                handleEdit(rowData);\n              }\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MyModal, {\n      handleClose: function handleClose() {\n        setModal(false);\n      },\n      open: modal,\n      title: edit ? \"Assign Leads\" : \"Create New Leads\",\n      clr: nMode ? \"#1b1c21\" : \"#fff\",\n      clrB: nMode ? \"#fff\" : \"darkgrey\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        outline: 'none'\n      },\n      children: edit ? /*#__PURE__*/_jsxDEV(Paper, {\n        style: {\n          maxWidth: 400,\n          margin: \"auto\",\n          borderWidth: 0,\n          backgroundColor: \"rgba(255, 255, 255, 0)\"\n        },\n        variant: \"outlined\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          gutterBottom: true,\n          style: {\n            color: \"grey\",\n            marginTop: 15\n          },\n          children: salespersonId === \"\" ? \"Please enter userId of salesperson you want to assign this lead to.\" : \"This lead has already been assigned to a user.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"User Id\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: salespersonId,\n          disabled: salespersonId !== \"\",\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setSalespersonId(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), salespersonId === \"\" && /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          fullWidth: true,\n          onClick: handleUpdate,\n          children: \"Assign Lead\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }, this) : /*#__PURE__*/_jsxDEV(Paper, {\n        style: {\n          maxWidth: 400,\n          margin: \"auto\",\n          borderWidth: 0,\n          backgroundColor: \"rgba(255, 255, 255, 0)\"\n        },\n        variant: \"outlined\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Name\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: name,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setName(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Company\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: company,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setCompany(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Contact Number\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: contactNum,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setContactNum(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Email\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: email,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setEmail(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Interest\",\n          variant: \"filled\",\n          fullWidth: true,\n          value: interest,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setInterest(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          required: true,\n          label: \"Comment\",\n          variant: \"filled\",\n          multiline: true,\n          fullWidth: true,\n          row: 3,\n          value: comment,\n          style: {\n            marginBottom: 10,\n            backgroundColor: \"rgba(255, 255, 255, 0.1)\",\n            borderRadius: 5\n          },\n          onChange: function onChange(e) {\n            setComment(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justify: \"space-between\",\n          style: {\n            marginTop: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: function onClick() {\n                return setModal(false);\n              },\n              variant: \"contained\",\n              color: \"secondary\",\n              fullWidth: true,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 5,\n            style: {\n              marginBottom: 20\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              fullWidth: true,\n              onClick: handleCreate,\n              children: \"Create Lead\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MySnackBar, {\n      open: snackBar,\n      handleClose: function handleClose() {\n        return setSnackbar(false);\n      },\n      severity: severity,\n      msg: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Leads, \"5pwQSXXmUj2sIwEwEibh0z6AAsE=\", false, function () {\n  return [useRouter];\n});\n\n_c = Leads;\n\nvar _c;\n\n$RefreshReg$(_c, \"Leads\");","map":{"version":3,"sources":["D:/project/ReactJSWEB/pages/leads.js"],"names":["React","useEffect","useState","useRouter","AdminLayout","Typography","MyModal","MySnackBar","MyTable","pinkM","Edit","auth","db","firebase","Grid","Paper","TextField","AcUnitIcon","IconButton","AddIcon","Button","Avatar","Leads","router","columns","setColumns","leads","setLeads","modal","setModal","current","setCurrent","dropDown","setDropDown","edit","setEdit","snackBar","setSnackbar","severity","setSeverity","message","setMessage","nMode","setNMode","photo","setPhoto","numLeads","setNumLeads","address","setAddress","phoneNum","setPhoneNum","userId","setUserId","company","setCompany","comment","setComment","contactNum","setContactNum","email","setEmail","interest","setInterest","name","setName","quote","setQuote","salespersonId","setSalespersonId","title","field","render","rowData","color","assigned","console","log","currentUser","collection","get","then","querySnapshot","leadsArr","forEach","doc","r","data","id","push","openEditor","handleEdit","undefined","handleCreate","alert","add","contactNumber","contacted","quoteSent","result","docRef","handleUpdate","exists","salesperson","update","error","marginTop","marginBottom","justifyItems","justifyContent","backgroundColor","borderRadius","marginLeft","length","icon","tooltip","onClick","event","display","alignItems","outline","maxWidth","margin","borderWidth","e","target","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { useRouter } from 'next/router'\r\nimport AdminLayout from \"../components/AdminLayout\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {MyModal, MySnackBar, MyTable, pinkM} from \"../helpers/mainHelpers\";\r\nimport Edit from \"@material-ui/icons/Edit\";\r\nimport {auth, db,firebase} from \"../helpers/firebase\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {Paper, TextField} from \"@material-ui/core\";\r\nimport AcUnitIcon from \"@material-ui/icons/AcUnit\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\n\r\n\r\n\r\n\r\nexport default function Leads() {\r\n    const router = useRouter();\r\n    const [columns, setColumns] = useState([]);\r\n    const [leads, setLeads] = useState([]);\r\n    const [modal, setModal] = useState(false);\r\n    const [current, setCurrent] = useState({});\r\n    const [dropDown, setDropDown] = useState(\"\");\r\n    const [edit, setEdit] = useState(false);\r\n    const [snackBar, setSnackbar] = useState(false);\r\n    const [severity, setSeverity] = useState(\"info\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [nMode, setNMode] = useState(true);\r\n\r\n    const [photo, setPhoto] = useState(\"\");\r\n\r\n    const [numLeads, setNumLeads] = useState(\"\");\r\n    const [address, setAddress] = useState(\"\");\r\n    const [phoneNum, setPhoneNum] = useState(\"\");\r\n    const [userId, setUserId] = useState(\"\");\r\n\r\n    const [company, setCompany] = useState(\"\");\r\n    const [comment, setComment] = useState(\"\");\r\n    const [contactNum, setContactNum] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [interest, setInterest] = useState(\"\");\r\n    const [name, setName] = useState(\"\");\r\n\r\n    const [quote, setQuote] = useState(\"\");\r\n\r\n\r\n    const [salespersonId, setSalespersonId] = useState(\"\");\r\n\r\n\r\n    useEffect(() => {\r\n    \r\n        setColumns([\r\n            { title: 'Name', field: 'name' },\r\n            { title: 'Company', field: 'company'},\r\n            // { title: 'Handler', field: 'name'},\r\n            { title: 'Quote', field:'quote',\r\n            render: rowData => (\r\n                <Typography gutterBottom variant=\"subtitle2\">\r\n                    { rowData.quote? \"RM \" + quote: \" \"}\r\n                </Typography>\r\n            ),\r\n        },\r\n            { title:\"\", field: 'quote'},\r\n            { title: 'Interest', field: 'interest' },\r\n            { title: 'Result', field: 'result' },\r\n            { title: 'Status', field: 'assigned',\r\n                render: rowData => (\r\n                    <Typography gutterBottom variant=\"subtitle2\" style={{color: rowData.assigned? \"green\":\"red\"}}>\r\n                        {rowData.assigned? \"ASSIGNED\": \"NOT ASSIGNED\"}\r\n                    </Typography>\r\n                ),\r\n            }\r\n        ])\r\n        console.log(auth.currentUser)\r\n        if(userId!==\"\"){\r\n        // db.collection(\"leads\").where(\"adminID\", \"==\",userId)\r\n        db.collection(\"leads\")\r\n        .get()\r\n        .then((querySnapshot) => {\r\n                let leadsArr = [];\r\n                querySnapshot.forEach(function(doc) {\r\n                    let r = doc.data();\r\n                    r.id = doc.id;\r\n                    leadsArr.push(r);\r\n                });\r\n                setLeads(leadsArr);\r\n            });\r\n        }\r\n    },[userId])\r\n\r\n    const openEditor = () => {\r\n        setPhoto(\"\");\r\n        setEmail(\"\");\r\n        setPhoneNum(\"\");\r\n        setAddress(\"\");\r\n        setEdit(false);\r\n        setModal(true);\r\n    }\r\n\r\n    const handleEdit = (rowData) => {\r\n        setCurrent(rowData);\r\n        if(rowData.userId !== undefined){\r\n            setSalespersonId(rowData.userId);\r\n        }else{\r\n            setSalespersonId(\"\");\r\n        }\r\n\r\n        setEdit(true);\r\n        setModal(true);\r\n    }\r\n\r\n    const handleCreate = () => {\r\n        if(name===\"\"||email===\"\"||contactNum===\"\"||company===\"\"||interest===\"\"||comment===\"\"){\r\n            alert(\"Please complete all fields\");\r\n        }else{\r\n            db.collection(\"leads\").add({\r\n                name: name,\r\n                company: company,\r\n                comment: comment,\r\n                email:email,\r\n                contactNumber: contactNum,\r\n                contacted: false,\r\n                assigned:false,\r\n                interest:interest,\r\n                quoteSent:false,\r\n                quote:\"\",\r\n                result:\"pending\",\r\n            })\r\n                .then(function(docRef) {\r\n                    setSeverity(\"success\");\r\n                    setMessage(\"Lead successfully created\");\r\n                    setSnackbar(true);\r\n                    setModal(false)\r\n                });\r\n        }\r\n    }\r\n\r\n    const handleUpdate = ()=> {\r\n        db.collection(\"users\").doc(salespersonId).get().then(function(doc) {\r\n            if (doc.exists && doc.data().salesperson) {\r\n                db.collection(\"leads\").doc(current.id).update({\r\n                    userId: salespersonId,\r\n                })\r\n                    .then(function() {\r\n                        setSeverity(\"success\");\r\n                        setMessage(\"User successfully updated\");\r\n                        setSnackbar(true);\r\n                        setModal(false)\r\n                    })\r\n            } else {\r\n                console.log(\"No such document!\");\r\n            }\r\n        }).catch(function(error) {\r\n            setSeverity(\"error\");\r\n            setMessage(\"An Error Occurred. Please ensure the id is correct\");\r\n            setSnackbar(true);\r\n            setModal(false)\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <AdminLayout setNMode={setNMode} setUserId={setUserId}>\r\n            <Grid container justify={\"space-between\"} style={{marginTop:10, marginBottom:10}}>\r\n                <Grid item xs={10}>\r\n                    <Typography variant=\"h5\" gutterBottom style={{color: \"grey\", marginTop: 15}}>\r\n                        Leads\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={2} style={{justifyItems:\"flex-end\", justifyContent:\"flex-end\"}}>\r\n                    <IconButton onClick={openEditor} style={{marginTop: 8, backgroundColor:\"#f50057\", color:\"#fff\", borderRadius:5, marginLeft:40}}>\r\n                        <AddIcon />\r\n                    </IconButton>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n                <Grid item xs={11}>\r\n                    <Paper style={{backgroundColor:\"rgba(255, 255, 255, 0)\", marginBottom:20}} variant=\"outlined\" >\r\n                        {leads.length !==0 && <MyTable title=\"\" columns={columns} data={leads} SColor={nMode?\"#fff\":\"grey\"} actions={[\r\n                            {\r\n                                icon: () => <Edit style={{color:nMode?\"#fff\":\"grey\"}}/>,\r\n                                tooltip: 'Edit/View Lead',\r\n                                onClick: (event, rowData) => {\r\n                                    handleEdit(rowData)\r\n                                }\r\n                            }\r\n                        ]}/>}\r\n                    </Paper>\r\n                </Grid>\r\n            </Grid>\r\n            <MyModal handleClose={() => {setModal(false)}} open={modal} title={edit?\"Assign Leads\":\"Create New Leads\"} clr={nMode? \"#1b1c21\":\"#fff\"} clrB={nMode? \"#fff\":\"darkgrey\"} style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                outline: 'none'}}>\r\n                {edit?<Paper\r\n                    style={{maxWidth: 400, margin: \"auto\", borderWidth: 0, backgroundColor: \"rgba(255, 255, 255, 0)\"}}\r\n                    variant=\"outlined\">\r\n\r\n                        <Typography variant=\"body2\" gutterBottom style={{color: \"grey\", marginTop: 15}}>\r\n                            {salespersonId===\"\"?\"Please enter userId of salesperson you want to assign this lead to.\":\r\n                            \"This lead has already been assigned to a user.\"}\r\n                        </Typography>\r\n                    <TextField\r\n                        required\r\n                        label=\"User Id\"\r\n                        variant=\"filled\"\r\n                        fullWidth\r\n                        value={salespersonId}\r\n                        disabled={salespersonId!==\"\"}\r\n                        style={{marginBottom: 10, backgroundColor: \"rgba(255, 255, 255, 0.1)\", borderRadius: 5}}\r\n                        onChange={(e) => {\r\n                            setSalespersonId(e.target.value)\r\n                        }}\r\n                    />\r\n                        {salespersonId===\"\"&&<Button variant=\"contained\" color=\"primary\" fullWidth onClick={handleUpdate}>\r\n                            Assign Lead\r\n                        </Button>}\r\n                </Paper>:\r\n                <Paper style={{maxWidth:400, margin:\"auto\", borderWidth:0, backgroundColor:\"rgba(255, 255, 255, 0)\"}} variant=\"outlined\">\r\n                    <TextField\r\n                        required\r\n                        label=\"Name\"\r\n                        variant=\"filled\"\r\n                        fullWidth\r\n                        value={name}\r\n                        style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                        onChange={(e) => {setName(e.target.value)}}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        label=\"Company\"\r\n                        variant=\"filled\"\r\n                        fullWidth\r\n                        value = {company}\r\n                        style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                        onChange={(e) => {setCompany(e.target.value)}}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        label=\"Contact Number\"\r\n                        variant=\"filled\"\r\n                        fullWidth\r\n                        value = {contactNum}\r\n                        style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                        onChange={(e) => {setContactNum(e.target.value)}}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        label=\"Email\"\r\n                        variant=\"filled\"\r\n                        fullWidth\r\n                        value = {email}\r\n                        style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                        onChange={(e) => {setEmail(e.target.value)}}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        label=\"Interest\"\r\n                        variant=\"filled\"\r\n                        fullWidth\r\n                        value = {interest}\r\n                        style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                        onChange={(e) => {setInterest(e.target.value)}}\r\n                    />\r\n                    <TextField\r\n                        required\r\n                        label=\"Comment\"\r\n                        variant=\"filled\"\r\n                        multiline\r\n                        fullWidth\r\n                        row={3}\r\n                        value = {comment}\r\n                        style={{marginBottom:10, backgroundColor:\"rgba(255, 255, 255, 0.1)\", borderRadius:5}}\r\n                        onChange={(e) => {setComment(e.target.value)}}\r\n                    />\r\n\r\n                    <Grid container justify={\"space-between\"} style={{marginTop:10}}>\r\n                        <Grid item xs={3}>\r\n                            <Button onClick={()=> setModal(false)} variant=\"contained\" color=\"secondary\" fullWidth>\r\n                                Cancel\r\n                            </Button>\r\n                        </Grid>\r\n                        <Grid item xs={5} style={{marginBottom:20}}>\r\n                            <Button variant=\"contained\" color=\"primary\" fullWidth onClick={handleCreate}>\r\n                                Create Lead\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>}\r\n            </MyModal>\r\n            <MySnackBar open={snackBar} handleClose={() => setSnackbar(false)} severity={severity} msg={message}/>\r\n\r\n        </AdminLayout>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}